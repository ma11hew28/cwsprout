

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta name="generator" content="JsDoc Toolkit" />
  
  <title>JsDoc: SC.RestServer</title>
</head>

<style type="text/css">
  /* @override http://localhost:4020/static/sproutcore/-docs/data/default.css */

/* @group Core */

body.sc-doc {
  background-color: white  ;
  padding: 20px;
}

.sc-doc {
  font: 64.5% Helvetica, Arial, Verdana, sans-serif;
  line-height: 1em ;
}

/* Set standard size on some things. */
.sc-doc p, 
.sc-doc dd, 
.sc-doc dt, 
.sc-doc li, 
.sc-doc table {
  line-height: 1.3em;
  font-size: 1.3em ;
}

.sc-doc h1 {
  font-size: 3em;
  margin: 0 0 1em 0;
  text-transform: capitalize;
}

.sc-doc h2 {
  padding: 0;
  padding-bottom: 4px;
  border-bottom: 1px #555 solid;
  text-transform: capitalize;
  margin: 1.5em 0 0;
  font-size: 2.2em;
}

.sc-doc h3 {
  font-size: 2em;
  padding: 0;
  margin: 3em 0 0 0;  
}

.sc-doc h4 {
  font-weight: normal ;
  font-size: 1.4em;
  margin: 0.5em 0 0 0;
  padding: 0;
}

.sc-doc h5 {
  font-size: 1.3em;
  padding: 0;
  margin: 1.3em 0 0.5em 0;
}

.sc-doc p { margin: 0.5em 0; }
 
.sc-doc a {
  text-decoration: none ;
}

.sc-doc label {
  font-weight: bold ;
}

.sc-doc .sc-theme .ghost {
  -moz-user-select: none;
  -khtml-user-select: none;
  user-select: none;
  opacity: 0.45;
  -moz-opacity: .45 ;
}

.sc-doc dt {
  font-style: italic;
}

.sc-doc dd {
 margin: 0 0 1em 1em;
}

/* @end */

/* @group Summary Table */

.sc-doc table.summary {
  min-width: 600px;
  border: 1px #999 solid;
  border-bottom: none ;
  border-spacing: 0;
  margin-bottom: 2em;
}

.sc-doc table.summary td {
  border-bottom: 1px #999 solid;
  border-collapse: collapse;
  padding: 0.5em;
  text-align: left ;
}

.sc-doc table.summary .even td {
  background-color: #eef;
}

.sc-doc table.summary td.label {
  font-weight: bold ;
  width: 100px;
  text-align: right ;
  padding-right: 4px;
}

.sc-doc table.summary td.value {
  min-width: 300px;
  width: 300px;
}

/* @end */

/* @group Field & Method Summary */

.sc-doc .summary li {
  list-style-type: none ;
  position: relative;
}

.sc-doc .summary li code {
  font-size: 1.1em;
}

.sc-doc .summary li .description {
  display: none ;
}

.sc-doc .summary li:hover .description {
  display: block ;
  font-size: 0.86em;
  position: absolute ;
  left: 80px;
  bottom: 2em;
  padding: 0.3em 1em ;
  background-color: #fff898;
  border: 1px solid #bbae2f;
  /* -webkit-box-shadow: rgba(0,0,0,0.3) 0px 2px 5px; */
  color: #4b4000;
  z-index: 100;
}

/* @end */

/* @group Detail */

.sc-doc .detail p.signature {
  padding: 0;
  margin: 1em 0;
  font-family: Courier, mono;
}

.sc-doc .detail p.signature .type {
  font-style: italic;
}

.sc-doc .detail p.signature .name {
  font-weight: bold ;
}

/* @end */

.sc-doc .jsdoc_ctime {
  border-top: 1px #ccc solid ;
  padding: 4px 0;
  margin-top: 20px;
  margin-bottom: 0px;
  font-size: 1.0em;
  text-align: center ;
  color: #888 ;
}

/* @group Description */

.sc-doc .description blockquote,
.sc-doc .description p.code {
  padding:  10px ;
  margin: 10px 20px;
  background-color: #f5f5f5 ;
  border: 1px #ccc solid ;
}

/* @end */

</style>

<body class="sc-theme sc-doc">
  <h1>
    
    Class SC.RestServer
  </h1>

  <table class="summary">
  

  

  
    <tr class="even">
      <td class="label">Extends:</td>
      <td class="value">
        SC.Server
      </td>
    </tr>
  

  
    <tr class="odd">
      <td class="label">Defined in:</td>
      <td class="value"><a href="../symbols/src/_Users_egads_Projects_cwsprout_frameworks_sproutcore_server_rest_server.js.html">frameworks/sproutcore/server/rest_server.js</a></td>
    </tr>
  

  
    <tr class="even">
      <td class="label">Availability:</td>
      <td class="value">
        since SproutCore 1.0
      </td>
    </tr>
  

  
  </table>

  
    <div class="description">
      <p>Usually you wouldn't need to call any of the methods on this class or it's superclass, except for calling the <ins>listFor</ins> method. The other methods are called for you when you work with your model objects. For example, calling myObject.commit(); will call the commitRecords method on this server if you had defined this server to be to the <ins>dataSource</ins> of myObject.</p>

<p>To have an SC model reflect data on a backend server attach an instance of this class to your application. For example:</p>


<p class="code"><code>Contacts = SC.Object.create({<br />server: SC.RestServer.create({ prefix: ['Contacts'] })<br />}) ;</code></p>

<p>Then attach that server as the <ins>dataSource</ins> to each model class that you want to have reflected. Also define a <ins>resourceURL</ins> which defines the URL where the collection of your model can be queried. For example:</p>


<p class="code"><code>Contacts.Contact = SC.Record.extend(<br />dataSource: Contacts.server,<br />resourceURL: 'sc/contacts',<br />properties: ['guid','firstName','lastName'],<br />primaryKey: 'guid'<br />}) ;</code></p>

<p>When you work with your models, behind the scenes SC will use 5 main methods on this server. Each is listed below, together with the HTTP method used in the call to the backend server and the URL that is being called. The URL is based on the example given above.</p>

<p>listFor             GET    /sc/contacts</p>

<p>createRecords       POST   /sc/contacts</p>

<p>refreshRecords for one record      GET    /sc/contacts/12345</p>

<p>refreshRecords for many records    GET    /sc/contacts?ids=1,2,3,4,5,6</p>

<p>commitRecords for one record      PUT    /sc/contacts/12345</p>

<p>commitRecords for many records    PUT    /sc/contacts?ids=1,2,3,4,5</p>

<p>destroyRecords for one record      DELETE /sc/contacts/12345</p>

<p>destroyRecords for many records    DELETE /sc/contacts?ids=1,2,3,4,5</p>

<p>The above is the default behaviour of this server. If you want different URLs to be generated then extend this class and override the <ins>urlFor</ins> method.</p>

<p>Another way to override the above is to tell SC where member resources can be refreshed, committed and destroyed. For example, when SC calls</p>


<p class="code"><code>GET /sc/contacts</code></p>

<p>you could reply as follows:</p>


<p class="code"><code>records: [<br />{  guid: '123',<br />type: "Contact",<br />refreshURL: "/contacts?refresh=123",<br />updateURL: "/contacts/123?update=Y",<br />destroyURL: "/contacts/123",<br />firstName: "Charles",<br />...<br />}],<br />...<br />}</code></p>

<p>Then when contact 123 needs to be refreshed later on by SC, it will call:</p>


<p class="code"><code>GET /contacts?refresh=123</code></p>

<p>instead of GET /contacts/123. Note that this only works for members on your resource. If a collection of contacts needed to be refreshed it would still call for example GET /contacts?id=123,456,789 instead of making 3 separate calls.</p>

<p>Because some browsers cannot actually perform an HTTP PUT or HTTP DELETE it will actually perform an HTTP POST but will put an additional key,value pair in the post data packet. For HTTP PUT it will add _method='put' and for HTTP DELETE it will add _method='delete' in the post data.</p>

<p>Via the SC.Server#request method you can also call collection and member functions on your resource. Use the <ins>action</ins> parameter for this. For example, server.request('contacts', 'archive', null, params, 'delete') would call:</p>


<p class="code"><code>DELETE /contacts/archive</code></p>

<p>And server.request('contacts', 'give', [12345], {'amount': 1000}, 'put') would call:</p>


<p class="code"><code>PUT /contacts/12345/give</code></p>

<p>with post data amount=1000.</p>

<p>Alternatively explicitely define the URL to use by setting the <ins>url</ins> property in the <ins>params</ins> argument that is passed to the server.request method. For example:</p>


<p class="code"><code>Contacts.server.request(null,null,null, {url: '/sc/archive'}, 'delete')</code></p>

<p>would call:</p>


<p class="code"><code>DELETE /sc/archive</code></p>
    </div>
  

  <!-- ============================== properties summary ===================== -->
  

  

<!-- ============================== methods summary ======================== -->
  

<!-- ============================== field details ========================== -->    
  

<!-- ============================== method details ========================= -->    
  
  
<!-- ============================== footer ================================= -->
  <div class="jsdoc_ctime">Documentation generated by <a href="http://jsdoctoolkit.org/" target="_parent">JsDoc Toolkit</a> 2.0.1 on Tue Aug 19 2008 17:50:57 GMT-0400 (EDT)</div>
</body>
</html>
